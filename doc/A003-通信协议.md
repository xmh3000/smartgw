### 一、网关控制
#### （一）重启(单项指令)
```
命令：
{
    "method": "gateway",
    "params": [{
        "clientID": "gateway101",
        "cmdName": "Reboot",
        "cmdParams": {}
    }]
}
返回：
null
```
#### （二）升级(单项指令)
```
命令：
{
    "method": "gateway",
    "params": [{
        "clientID": "gateway101",
        "cmdName": "Upgrade",
        "cmdParams": {
            "url": "http://121.36.151.190:8080/gateway/opengw.img",
            "md5": "b0b0b0b0b0b0b0b0b0"
        }
    }]
}
返回：
null
```
#### （三）获取设备列表(双项指令)
```
命令：
{
    "method": "gateway",
    "params": [{
        "clientID": "gateway101",
        "cmdName": "GetDevices",
        "cmdParams": {}
    }]
}
返回：
{
	"method": "gateway",
	"params": [{
		"clientID": "gateway101",
		"cmdName": "",
		"cmdStatus": 0,
		"cmdResult": [{
			"collectName": "",      // 采集接口
			"name": "DDSY422TEST",  // 设备名称 = 客户端id
			"addr": "732481",       // 地址
			"type": "DDSY422"       // 驱动类型
		}]
	}]
}


```
#### （四）下发设备列表
```
命令：
{
	"method": "gateway",
	"params": [{
		"clientID": "gateway101",
		"cmdName": "SetDevices",
		"cmdParams": {
			"devices": [{
				"collectName": "电表",
				"name": "ACR1",
				"addr": "1",
				"type": "SFR"
			}, {
				"collectName": "电表",
				"name": "ACR2",
				"addr": "2",
				"type": "SFR"
			}]
		}
	}]
}
返回：
{
  "method": "gateway",
  "params": [
    {
      "clientID": "gateway101",
      "cmdName": "",
      "cmdStatus": 0
    }
  ]
}
注：cmdStatus：0 成功， 1 失败
```

####（五）清空设备列表（同四）
```
命令：
{
	"method": "gateway",
	"params": [{
		"clientID": "gateway101",
		"cmdName": "SetDevices",
		"cmdParams": {
			"devices": []
		}
	}]
}
```

####（六）联通测试 ping
```
命令：
{
	"method": "gateway",
	"params": [{
		"clientID": "gateway101",
		"cmdName": "Ping",
		"cmdParams": {}
	}]
}
返回：
{
  "method": "gateway",
  "params": [
    {
      "clientID": "gateway101",
      "cmdName": "",
      "cmdStatus": 0
    }
  ]
}
```

###二、电能计量（普通表具）
####（一）数据上报
```
{
	"表具编号1": [{
		"ts": 1642766374000,
		"values": {
			"dev_consumption": 0.01
		}
	}],
	"表具编号2": [{
		"ts": 1642766374000,
		"values": {
			"dev_consumption": 0.28
		}
	}]
}
```
###三、预付费
####（一）数据上报
```
{
	"表具编号1": [{
		"ts": 1642766374000,
		"values": {
			"dev_consumption": 0.01,
			"dev_remain_amt": 49.98,
			"dev_control": 0
		}
	}],
	"表具编号2": [{
		"ts": 1642766374000,
		"values": {
			"dev_consumption": 0.28,
			"dev_remain_amt": 15,
			"dev_control": 0
		}
	}]
}
```
###（二）数据读写（远程控制）
####1、金额
####（1）读取金额
```
命令：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "GetAmount",
		"cmdParams ": {}
	}]

}
返回：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "GetAmount",
		"cmdStatus": 0
	}]
}
```
####（2）设置金额
```
命令：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "SetAmount",
		"cmdParams": {
			"amount": 100.00
		}
	}]
}
返回：
{
	"method": "device",
	"params": [{
	"clientID": "表具编号",
	"cmdName": "SetAmount",
	"cmdParams ": {}
}]

}
```
####（3）添加金额（充值）
```
命令：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "GetCount",
		"cmdParams": {}
	},{
		"clientID": "表具编号",
		"cmdName": "AddAmount",
		"cmdParams": {
			"amount": 100.00
		}
	}]
}
返回：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "AddAmount",
		"cmdStatus": 0
	}]
}
```
####2、单价
####（1）读取单价
```
命令：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "GetPrice",
		"cmdParams": {}
	}]
}
返回：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "GetPrice",
		"cmdStatus": 0
	}]
}
```
####（2）设置单价
```
命令：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "SetPrice",
		"cmdParams": {
			"price": 100.00
		}
	}]
}
返回：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "SetPrice",
		"cmdStatus": 0
	}]
}
```
####3、控制状态
####（1）读取控制
```
命令：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "GetControl",
		"cmdParams": {}
	}]
}
返回：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "GetControl",
		"cmdStatus": 0
	}]
}
```
####（2）设置控制
```
命令：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "SetControl",
		"cmdParams": {
			"control": 0
		}
	}]
}
//"control":0  远程开闸（跳闸）
//"control":1  远程合闸
//"control":2  本地
//"control":3  跳闸
//"control":4  合闸
//"control":5  保电
//"control":6  保电解除
返回值：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "SetControl",
		"cmdStatus": 0
	}]
}
```
####4、雅达预付费特有命令

####（1）开户
####开户操作说明： A、开户操作应满足的条件：a、命令中的购电次数为 0 或 1；b、对于已开户的电表进行开户时，命令中的客户编号应与电能表中的客户编 号一致； B、开户操作内容：a、电能表开户时，如开户命令中购电次数比电表中的购电次数大于 1，则开户充值，如购电次数相等，则只开户，不 充值；b、对未开户的电能，收到开户命令时，直接开户，开户成功后保存客户编号，设置电能表为远程已开户；c、对已开户的电表，收 到开户命令时，如客户编号一致时，按照远程开户流程操作，设置电能表为远程已开户。
```
命令：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "SetAccount",
		"cmdParams": {}
	}]
}
返回：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "SetAccount",
		"cmdStatus": 0
	}]
}
```
####（2）初始化
####初始化操作说明： A、初始化操作满足条件：a、命令中的购电次数要为 0； B、操作内容：剩余电量初始化为预置电量，不判囤积电量限值，购电次数初始化为 0；对电能表进行清零操作，同时清掉开户状态、跳闸 状态、报警状态、不清保电状态和客户编号；记录购电记录，购电记录中购电后总次数为 0，购电电量为预置电量，购电前剩余电量为 0， 购电后剩余电量和购电后累计购电量为预置电量；
```
命令：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "Initialize",
		"cmdParams": {}
	}]
}
返回：
{
	"method": "device",
	"params": [{
		"clientID": "表具编号",
		"cmdName": "Initialize",
		"cmdStatus": 0
	}]
}
```
###四、水表
####（一）数据上报
```
{
	"表具编号1": [{
		"ts": 1642766374000,
		"values": {
			"dev_flow": 0.01
		}
	}],
	"表具编号2": [{
		"ts": 1642766374000,
		"values": {
			"dev_flow": 0.28
		}
	}]
}
```
###五、路灯控制器
####（一）下发常规策略
```
命令：
{
	"method": "device",
	"params": [{
		"clientID": "控制器编号",
		"cmdName": "SetStrategy",
		"cmdParams": {
		    "loopID": "回路编号",
            "timesLength": "时间段数",
		    "times": ["00:00:00", "06:00:00", "18:00:00", "23:59:00"]
		}
	}]
}
返回值：
{
	"method": "device",
	"params": [{
		"clientID": "控制器编号",
		"cmdName": "SetStrategy",
		"cmdStatus": 0
	}]
}
```
####（二）下发临时策略
```
命令:
{
	"method": "device",
	"params": [{
		"clientID": "控制器编号",
		"cmdName": "SetTempStrategy",
		"cmdParams": {
		    "loopID": "回路编号",
		    "status": 0                             // 0 关灯，1 亮灯
		    "endtime": 2022-01-25 11:18:30"
		}
	}]
}
返回值：
{
	"method": "device",
	"params": [{
		"clientID": "控制器编号",
		"cmdName": "SetTempStrategy",
		"cmdStatus": 0
	}]
}
```

####（三）校验时间
```
命令：
{
	"method": "device",
	"params": [{
		"clientID": "控制器编号",
		"cmdName": "SetTime",
		"cmdParams": {
			"time": "2022-01-25 11:18:30 02"
		}
	}]
}
//time最后两个数是星期	
返回：
{
	"method": "device",
	"params": [{
		"clientID": "控制器编号",
		"cmdName": "SetTime",
		"cmdStatus": 0	
	}]
}
```
####（四）数据上报继电器状态
```
{
	"控制器编号1": [{
		"ts": 1642766374000,
		"values": {
			"relayStatus": "0~255"
		}
	}],
	"控制器编号2": [{
		"ts": 1642766374000,
		"values": {
			"relayStatus": "0~255"
		}
	}]
}
//"relayStatus":"255"，11111111对应87654321路继电器状态
//"relayStatus":"0"，00000000对应87654321路继电器状态
```
